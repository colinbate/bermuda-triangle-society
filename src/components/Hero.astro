---
import { Image } from "astro:assets";
import heroImage from "../assets/sff-bermudabookclub.webp";

interface Props {
    title?: string;
    subtitle?: string;
    showImage?: boolean;
}

const {
    title = "Bermuda Triangle Society",
    subtitle = "A monthly book club for explorers of science fiction, fantasy, and the wonderfully weird.",
    showImage = true,
} = Astro.props;
---

<section
    class="relative overflow-hidden bg-linear-to-b from-mystic-950 via-mystic-900 to-mystic-800 text-white"
>
    <!-- Starry background -->
    <div class="absolute inset-0 bg-stars opacity-50" aria-hidden="true"></div>

    <!-- Subtle nautical grid overlay -->
    <div
        class="absolute inset-0 origin-center scale-125 opacity-[0.3] pointer-events-none rotate-6"
        aria-hidden="true"
    >
        <svg class="w-[120%] h-[120%]" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <pattern
                    id="hero-grid"
                    width="80"
                    height="80"
                    patternUnits="userSpaceOnUse"
                >
                    <path
                        d="M 80 0 L 0 0 0 80"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="0.5"
                        class="text-bermuda-300"></path>
                </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#hero-grid)"></rect>
        </svg>
    </div>

    <!-- Compass rose in background -->
    <div
        class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-150 h-150 opacity-[0.025] pointer-events-none"
        aria-hidden="true"
    >
        <svg viewBox="0 0 200 200" class="w-full h-full text-bermuda-300">
            <circle
                cx="100"
                cy="100"
                r="95"
                fill="none"
                stroke="currentColor"
                stroke-width="0.5"></circle>
            <circle
                cx="100"
                cy="100"
                r="75"
                fill="none"
                stroke="currentColor"
                stroke-width="0.3"></circle>
            <circle
                cx="100"
                cy="100"
                r="55"
                fill="none"
                stroke="currentColor"
                stroke-width="0.3"></circle>
            <path d="M100 5 L103 100 L100 195 L97 100 Z" fill="currentColor"
            ></path>
            <path d="M5 100 L100 97 L195 100 L100 103 Z" fill="currentColor"
            ></path>
            <path
                d="M20 20 L102 98 L180 180 L98 102 Z"
                fill="currentColor"
                opacity="0.5"></path>
            <path
                d="M180 20 L102 98 L20 180 L98 102 Z"
                fill="currentColor"
                opacity="0.5"></path>
        </svg>
    </div>

    <!-- Subtle tentacle creeping from bottom left -->
    <div
        class="absolute -bottom-8 -left-8 w-64 h-64 opacity-[0.06] pointer-events-none"
        aria-hidden="true"
    >
        <svg viewBox="0 0 100 100" class="w-full h-full text-mystic-400">
            <path
                d="M0 100 Q15 85 20 70 Q25 55 18 40 Q12 28 20 15"
                fill="none"
                stroke="currentColor"
                stroke-width="3"
                stroke-linecap="round"></path>
            <path
                d="M20 100 Q30 88 38 75 Q45 62 40 48 Q36 38 42 28"
                fill="none"
                stroke="currentColor"
                stroke-width="2.5"
                stroke-linecap="round"></path>
            <path
                d="M40 100 Q48 92 55 82 Q62 72 58 60"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"></path>
            <circle cx="20" cy="15" r="2.5" fill="currentColor"></circle>
            <circle cx="42" cy="28" r="2" fill="currentColor"></circle>
            <circle cx="58" cy="60" r="1.5" fill="currentColor"></circle>
        </svg>
    </div>

    <!-- Eldritch eye watching from top right -->
    <div
        class="absolute top-16 right-8 md:right-16 w-16 h-10 opacity-[0.04] pointer-events-none"
        aria-hidden="true"
    >
        <svg viewBox="0 0 80 48" class="w-full h-full text-lantern-300">
            <ellipse
                cx="40"
                cy="24"
                rx="36"
                ry="20"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"></ellipse>
            <circle
                cx="40"
                cy="24"
                r="10"
                fill="none"
                stroke="currentColor"
                stroke-width="1"></circle>
            <circle cx="40" cy="24" r="4" fill="currentColor"></circle>
        </svg>
    </div>

    <!-- Floating particles -->
    <div
        class="absolute inset-0 overflow-hidden pointer-events-none"
        aria-hidden="true"
    >
        <div
            class="absolute top-1/4 left-1/4 w-2 h-2 bg-lantern-400 rounded-full animate-twinkle"
        >
        </div>
        <div
            class="absolute top-1/3 right-1/3 w-1.5 h-1.5 bg-bermuda-400 rounded-full animate-twinkle"
            style="animation-delay: 0.5s;"
        >
        </div>
        <div
            class="absolute top-1/2 left-1/6 w-1 h-1 bg-white rounded-full animate-twinkle"
            style="animation-delay: 1s;"
        >
        </div>
        <div
            class="absolute bottom-1/4 right-1/4 w-2 h-2 bg-mystic-400 rounded-full animate-twinkle"
            style="animation-delay: 0.3s;"
        >
        </div>
        <div
            class="absolute top-1/5 right-1/6 w-1.5 h-1.5 bg-lantern-300 rounded-full animate-twinkle"
            style="animation-delay: 0.7s;"
        >
        </div>
    </div>

    <div class="relative max-w-6xl mx-auto px-4 py-16 md:py-24">
        <div class="grid md:grid-cols-2 gap-8 md:gap-12 items-center">
            <!-- Text Content -->
            <div class="text-center md:text-left">
                <!-- Triangle icon -->
                <div
                    class="inline-flex items-center justify-center w-16 h-16 mb-6 rounded-2xl bg-linear-to-br from-mystic-500/30 to-bermuda-500/30 border border-mystic-400/20 backdrop-blur-sm relative"
                >
                    <span
                        class="text-3xl text-mystic-200 animate-float relative top-1"
                    >
                        <i class="fa-solid fa-sharp fa-sharp fa-triangle"></i>
                    </span>
                    <!-- Tiny arcane glow around triangle -->
                    <div
                        class="absolute inset-0 rounded-2xl opacity-30 pointer-events-none"
                        aria-hidden="true"
                    >
                        <svg
                            viewBox="0 0 64 64"
                            class="w-full h-full text-bermuda-400"
                        >
                            <circle
                                cx="32"
                                cy="32"
                                r="28"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="0.5"
                                stroke-dasharray="2 4"></circle>
                        </svg>
                    </div>
                </div>

                <h1
                    class="text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-6 leading-tight"
                >
                    {title}
                </h1>

                <p
                    class="text-lg md:text-xl text-mystic-200 mb-8 leading-relaxed max-w-lg mx-auto md:mx-0"
                >
                    {subtitle}
                </p>

                <!-- CTA Buttons -->
                <div
                    class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start"
                >
                    <slot name="primary-cta">
                        <a href="/sessions" class="btn btn-primary">
                            <span>Explore Sessions</span>
                            <i class="fa-solid fa-sharp fa-arrow-right ml-2"
                            ></i>
                        </a>
                    </slot>
                    <slot name="secondary-cta">
                        <a
                            href="/submit"
                            class="btn btn-outline border-mystic-400 text-mystic-100 hover:bg-mystic-700 hover:border-mystic-600"
                        >
                            Submit a Theme
                        </a>
                    </slot>
                </div>

                <!-- Next Meeting Teaser -->
                <slot name="meeting-teaser" />
            </div>

            <!-- Hero Image -->
            {
                showImage && (
                    <div class="relative">
                        <div
                            class="absolute -inset-4 bg-linear-to-r from-mystic-500/20 via-bermuda-500/20 to-lantern-500/20 rounded-3xl blur-2xl"
                            aria-hidden="true"
                        />
                        <div class="relative rounded-2xl overflow-hidden shadow-2xl shadow-mystic-950/50 border border-mystic-700/50">
                            <Image
                                src={heroImage}
                                alt="A magical scene with books, a glowing lantern, dragons, spaceships, and fantastical worlds merging together"
                                class="w-full h-auto"
                                loading="eager"
                            />
                            <div class="absolute inset-0 bg-linear-to-t from-mystic-950/60 via-transparent to-transparent" />
                        </div>

                        {/* Decorative elements */}
                        <div
                            class="absolute -top-3 -right-3 text-lantern-400 animate-twinkle"
                            aria-hidden="true"
                        >
                            <i class="fa-solid fa-sharp fa-sparkle text-xl" />
                        </div>
                        <div
                            class="absolute -bottom-2 -left-2 text-bermuda-400 animate-twinkle"
                            style="animation-delay: 0.5s;"
                            aria-hidden="true"
                        >
                            <i class="fa-solid fa-sharp fa-sparkle text-lg" />
                        </div>
                        {/* Nautical coordinate marker */}
                        <div
                            class="absolute -bottom-6 right-4 text-[10px] font-mono text-mystic-500/40"
                            aria-hidden="true"
                        >
                            32°17'35"N 64°47'11"W
                        </div>
                    </div>
                )
            }
        </div>
    </div>

    <!-- Bottom wave decoration -->
    <div
        class="absolute -bottom-px -left-px -right-px overflow-hidden pointer-events-none"
        aria-hidden="true"
    >
        <svg
            class="w-[calc(100%+2px)] h-12 md:h-16 text-mystic-50 dark:text-slate-950 block"
            viewBox="0 0 1200 60"
            preserveAspectRatio="none"
        >
            <path
                d="M0,60 L0,40 Q300,0 600,30 T1200,20 L1200,60 Z"
                fill="currentColor"></path>
        </svg>
    </div>
</section>
